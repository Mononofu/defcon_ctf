<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>IDA - C:\Users\mononofu\Downloads\blackjack.idb (blackjack)</title>
</head>
<body bgcolor="white">
<span style="white-space: pre; font-family: FixedSys; color: blue; background: white">

<span style="color:gray">int __cdecl PrintHand(int fd, int cards, int a3)
</span><span style="color:navy">{
</span><span style="background:#eeffff">  <span style="color:gray">int value</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">eax@18                                                        </span></span>
<span style="background:#eeffff">  <span style="color:gray">int result</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">eax@19                                                       </span></span>
<span style="background:#eeffff">  <span style="color:gray">signed int i</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">[sp+2Ch] [bp-1Ch]@1                                        </span></span>
<span style="background:#eeffff">  <span style="color:gray">char buf</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">[sp+32h] [bp-16h]@14                                           </span></span>
<span style="background:#eeffff">  <span style="color:gray">int v7</span><span style="color:navy">; </span><span style="color:gray">// </span><span style="color:#8080ff">[sp+3Ch] [bp-Ch]@1                                               </span></span>

  <span style="color:#8080ff">v7 </span><span style="color:navy">= *</span>MK_FP<span style="color:navy">(</span>__GS__<span style="color:navy">, 20);
  for ( </span><span style="color:#8080ff">i </span><span style="color:navy">= 0; </span><span style="color:#8080ff">i &lt;</span><span style="color:navy">= 20; ++</span><span style="color:#8080ff">i </span><span style="color:navy">)
  {
    if ( !</span><span style="color:#8080ff">a3 </span><span style="color:navy">|| </span><span style="color:#8080ff">i </span><span style="color:navy">)
    {
      if ( !*(</span><span style="color:gray">_BYTE *</span><span style="color:navy">)(</span><span style="color:#8080ff">cards </span><span style="color:navy">+ </span><span style="color:#8080ff">i</span><span style="color:navy">) )
        break;
      switch ( *(</span><span style="color:gray">_BYTE *</span><span style="color:navy">)(</span><span style="color:#8080ff">cards </span><span style="color:navy">+ </span><span style="color:#8080ff">i</span><span style="color:navy">) )
      {
        case 1:
          </span>sendit<span style="color:navy">(</span><span style="color:#8080ff">fd</span><span style="color:navy">, &quot;</span><span style="color:green">A &quot;</span><span style="color:navy">);
          break;
        case 0xB:
          </span>sendit<span style="color:navy">(</span><span style="color:#8080ff">fd</span><span style="color:navy">, &quot;</span><span style="color:green">J &quot;</span><span style="color:navy">);
          break;
        case 0xC:
          </span>sendit<span style="color:navy">(</span><span style="color:#8080ff">fd</span><span style="color:navy">, &quot;</span><span style="color:green">Q &quot;</span><span style="color:navy">);
          break;
        case 0xD:
          </span>sendit<span style="color:navy">(</span><span style="color:#8080ff">fd</span><span style="color:navy">, &quot;</span><span style="color:green">K &quot;</span><span style="color:navy">);
          break;
        default:
          </span>snprintf<span style="color:navy">(&amp;</span><span style="color:#8080ff">buf</span><span style="color:navy">, 9u, &quot;</span><span style="color:green">%d &quot;</span><span style="color:navy">, *(</span><span style="color:gray">_BYTE *</span><span style="color:navy">)(</span><span style="color:#8080ff">cards </span><span style="color:navy">+ </span><span style="color:#8080ff">i</span><span style="color:navy">));
          </span>sendit<span style="color:navy">(</span><span style="color:#8080ff">fd</span><span style="color:navy">, &amp;</span><span style="color:#8080ff">buf</span><span style="color:navy">);
          break;
      </span><span style="background:navy"></span><span style="color:navy">}
    </span><span style="background:blue"></span><span style="color:navy">}
    else
    {
      </span>sendit<span style="color:navy">(</span><span style="color:#8080ff">fd</span><span style="color:navy">, &quot;</span><span style="color:green">X &quot;</span><span style="color:navy">);
    </span><span style="background:navy"></span><span style="color:navy">}
  </span><span style="background:blue"></span><span style="color:navy">}
  if ( !</span><span style="color:#8080ff">a3 </span><span style="color:navy">)
  {
    </span><span style="color:#8080ff">value </span><span style="color:navy">= </span>CalculateHandValue<span style="color:navy">(</span><span style="color:#8080ff">cards</span><span style="color:navy">);
    </span>snprintf<span style="color:navy">(&amp;</span><span style="color:#8080ff">buf</span><span style="color:navy">, 9u, &quot;</span><span style="color:green">(%d)&quot;</span><span style="color:navy">, </span><span style="color:#8080ff">value</span><span style="color:navy">);
    </span>sendit<span style="color:navy">(</span><span style="color:#8080ff">fd</span><span style="color:navy">, &amp;</span><span style="color:#8080ff">buf</span><span style="color:navy">);
  </span><span style="background:navy"></span><span style="color:navy">}
  </span><span style="color:#8080ff">result </span><span style="color:navy">= *</span>MK_FP<span style="color:navy">(</span>__GS__<span style="color:navy">, 20) ^ </span><span style="color:#8080ff">v7</span><span style="color:navy">;
  if ( *</span>MK_FP<span style="color:navy">(</span>__GS__<span style="color:navy">, 20) != </span><span style="color:#8080ff">v7 </span><span style="color:navy">)
    </span>__stack_chk_fail<span style="color:navy">();
  return </span><span style="color:#8080ff">result</span><span style="color:navy">;
</span><span style="background:#8080ff"></span><span style="color:navy">}
</span></body></html>
